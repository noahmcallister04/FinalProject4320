{% extends "base.html" %}

{% block content %}
<div class="container">
    <h1>Administrator Login</h1>
    
    {% if logged_in %}
        <!-- ADMIN DASHBOARD - Shown when logged in -->
        <div style="text-align: right; margin-bottom: 20px;">
            <a href="{{ url_for('admin_logout') }}" style="color: #d9534f;">Logout</a>
        </div>
        
        <h3>Printing Seating Chart...</h3>
        <div style="font-family: monospace; margin: 20px 0; background-color: #f5f5f5; padding: 15px; white-space: pre;">
{% for i in range(12) %}
[ {{ 'X' if seating_chart[i][0] == 'X' else 'O' }}, {{ 'X' if seating_chart[i][1] == 'X' else 'O' }}, {{ 'X' if seating_chart[i][2] == 'X' else 'O' }}, {{ 'X' if seating_chart[i][3] == 'X' else 'O' }} ]
{% endfor %}
        </div>
        
        <p><strong>Total Sales: ${{ total_sales }}</strong></p>
        
        <h3 style="margin-top: 30px;">Reservation List</h3>
        {% if reservations %}
            {% for reservation in reservations %}
            <div style="margin: 15px 0; padding: 10px; border: 1px solid #ccc; background-color: #f9f9f9;">
                <p><strong>{{ reservation.passengerName }}</strong> - Row: {{ reservation.seatRow + 1 }}, Seat: {{ reservation.seatColumn + 1 }} - Ticket Confirmation: {{ reservation.eTicketNumber }}</p>
                <form method="POST" action="{{ url_for('delete_reservation', reservation_id=reservation.id) }}" style="display: inline;">
                    <button type="submit" onclick="return confirm('Are you sure you want to delete this reservation?');" style="background-color: #d9534f; color: white; border: none;">Delete Reservation</button>
                </form>
            </div>
            {% endfor %}
        {% else %}
            <p>No reservations found.</p>
        {% endif %}
        
    {% else %}
        <!-- LOGIN FORM - Shown when not logged in -->
        <form method="POST" action="{{ url_for('admin_login') }}" style="margin-top: 20px;">
            <div style="margin-bottom: 15px;">
                <label for="username">Username:</label><br>
                <input type="text" id="username" name="username" required style="padding: 5px; width: 250px;">
            </div>
            
            <div style="margin-bottom: 15px;">
                <label for="password">Password:</label><br>
                <input type="password" id="password" name="password" required style="padding: 5px; width: 250px;">
            </div>
            
            <button type="submit">LOGIN</button>
        </form>
    {% endif %}
</div>
{% endblock %}